# Health Connect Setup for Android

This app uses Health Connect to read step data from Google Fit and Samsung Health on Android devices.

## Requirements

### For Users

1. **Android 14 (API 34) or higher**: Health Connect is built into Android 14+
2. **Google Fit or Samsung Health**: One of these apps must be installed and tracking your steps
3. **Permissions**: Grant the app permission to read step data via Health Connect

### For Developers

This app uses Expo's Continuous Native Generation (Prebuild) workflow. Native folders are auto-generated and should not be committed to version control.

**Important**: Health Connect requires native code and will NOT work in Expo Go or web preview.

1. **Build locally for testing**:
   ```bash
   npx expo prebuild
   npx expo run:android
   ```
   The `prebuild` command generates the android folder with all necessary Health Connect configurations.

2. **Build with EAS Build** (recommended):
   ```bash
   eas build --profile development --platform android
   ```
   EAS Build automatically runs prebuild and generates native code during the build process.

3. **Test on Android 14+ device or emulator**

**Note**: The android and ios folders are auto-generated by Expo Prebuild. All native configurations are managed in `app.json` under the `android`, `ios`, and `plugins` sections. Do not manually edit native folders - they will be regenerated on each build.

## How It Works

### iOS
- Uses native HealthKit API via `expo-sensors` Pedometer
- Real-time step counting from Apple Health

### Android
- Uses Health Connect to read step data from Google Fit or Samsung Health
- Polls for step updates every 60 seconds while app is open
- Reads historical step data for charts and analytics

## User Setup Steps

1. Install Google Fit or Samsung Health (if not already installed)
2. Ensure the fitness app is tracking steps (usually automatic)
3. Open this app and grant Health Connect permissions when prompted
4. Steps will sync automatically from your fitness app

## Troubleshooting

### Steps showing as 0 on Android
- Ensure Google Fit or Samsung Health is installed
- Check that your fitness app is tracking steps
- Verify Health Connect permissions are granted
- Try walking a few steps to trigger the fitness app

### Health Connect not available
- Device must be running Android 14 or higher
- Older devices may not support Health Connect

## Technical Details

The app uses the `react-native-health-connect` library to:
- Initialize Health Connect SDK
- Request READ_STEPS permission
- Query step records for today and historical dates
- Aggregate step counts across multiple records
